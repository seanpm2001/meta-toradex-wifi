From 24e5e476458b0a3f5ab26d6f6c27511b67a7a1af Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Thu, 4 Apr 2024 16:36:14 -0300
Subject: [PATCH] Update minimum version for sa_data_min patch

---
 mlinux/moal_eth_ioctl.c | 2 +-
 mlinux/moal_shim.c      | 2 +-
 mlinux/moal_uap_wext.c  | 2 +-
 mlinux/moal_wext.c      | 4 ++--
 4 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/mlinux/moal_eth_ioctl.c b/mlinux/moal_eth_ioctl.c
index 30bdc70..b731d4e 100755
--- a/mlinux/moal_eth_ioctl.c
+++ b/mlinux/moal_eth_ioctl.c
@@ -5006,7 +5006,7 @@ woal_priv_get_ap(moal_private *priv, t_u8 *respbuf, t_u32 respbuflen)
 	if (bss_info.media_connected == MTRUE) {
 		moal_memcpy_ext(priv->phandle, mwr->u.ap_addr.sa_data,
 				&bss_info.bssid, MLAN_MAC_ADDR_LENGTH,
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 2, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 80)
 				sizeof(mwr->u.ap_addr.sa_data_min));
 #else
 				sizeof(mwr->u.ap_addr.sa_data));
diff --git a/mlinux/moal_shim.c b/mlinux/moal_shim.c
index fc8530d..1e96ab6 100755
--- a/mlinux/moal_shim.c
+++ b/mlinux/moal_shim.c
@@ -1887,7 +1887,7 @@ moal_recv_event(t_void *pmoal, pmlan_event pmevent)
 			memset(wrqu.ap_addr.sa_data, 0x00, ETH_ALEN);
 			moal_memcpy_ext(priv->phandle, wrqu.ap_addr.sa_data,
 					pmevent->event_buf, ETH_ALEN,
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 2, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 80)
 					sizeof(wrqu.ap_addr.sa_data_min));
 #else
 					sizeof(wrqu.ap_addr.sa_data));
diff --git a/mlinux/moal_uap_wext.c b/mlinux/moal_uap_wext.c
index 9b277e1..8fe7403 100755
--- a/mlinux/moal_uap_wext.c
+++ b/mlinux/moal_uap_wext.c
@@ -229,7 +229,7 @@ woal_get_wap(struct net_device *dev, struct iw_request_info *info,
 	if (priv->bss_started)
 		moal_memcpy_ext(priv->phandle, awrq->sa_data,
 				priv->current_addr, MLAN_MAC_ADDR_LENGTH,
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 2, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 80)
 				sizeof(awrq->sa_data_min));
 #else
 				sizeof(awrq->sa_data));
diff --git a/mlinux/moal_wext.c b/mlinux/moal_wext.c
index 55636f2..02afb57 100755
--- a/mlinux/moal_wext.c
+++ b/mlinux/moal_wext.c
@@ -617,7 +617,7 @@ woal_get_wap(struct net_device *dev, struct iw_request_info *info,
 
 	if (bss_info.media_connected == MTRUE)
 		moal_memcpy_ext(priv->phandle, awrq->sa_data, &bss_info.bssid,
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 2, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 80)
 				MLAN_MAC_ADDR_LENGTH,
 				sizeof(awrq->sa_data_min));
 #else
@@ -2972,7 +2972,7 @@ woal_get_scan(struct net_device *dev, struct iw_request_info *info,
 		iwe.u.ap_addr.sa_family = ARPHRD_ETHER;
 		moal_memcpy_ext(priv->phandle, iwe.u.ap_addr.sa_data,
 				&scan_table[i].mac_address, ETH_ALEN,
-#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 2, 0)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(6, 1, 80)
 				sizeof(iwe.u.ap_addr.sa_data_min));
 #else
 				sizeof(iwe.u.ap_addr.sa_data));
-- 
2.25.1

